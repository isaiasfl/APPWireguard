#!/bin/bash
# Post-installation script for APPWireguard

# Restart PolicyKit to load new rules
if command -v systemctl >/dev/null 2>&1; then
    systemctl restart polkit 2>/dev/null || true
fi

# Add user to wheel group if not already (for PolicyKit rules)
if ! groups "$SUDO_USER" | grep -q '\bwheel\b' 2>/dev/null; then
    if command -v usermod >/dev/null 2>&1 && [ -n "$SUDO_USER" ]; then
        usermod -a -G wheel "$SUDO_USER" 2>/dev/null || true
    fi
fi

exit 0